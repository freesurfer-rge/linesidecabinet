# Steps template for running the tests

parameters:
  testDir: ''
  testTitle: 'Lineside Test Run'

steps:
- script: ./LinesideTest --log_level=all --log_format=JUNIT --log_sink=test-results-JUNIT.xml --report_sink=stdout
  displayName: "Run all tests"
  workingDirectory: ${{ parameters.testDir }}

- task: PublishTestResults@2
  displayName: "Publish test results"
  condition: succeededOrFailed()
  inputs:
    testResultsFormat: 'JUnit'
    testResultsFiles: '**/*JUNIT.xml'
    searchFolder: ${{ parameters.testDir }}
    failTaskOnFailedTests: true
    testRunTitle: ${{ parameters.testTitle }}